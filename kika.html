<!DOCTYPE html>
<html>
    <head>
        <title>CAKE</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
body {
    background-color: #333;
}
.cake {
    position: absolute;
    width: 250px;
    height: 200px;
    top: 50%;
    left: 50%;
    margin-top: -70px;
    margin-left: -125px;
}
.plate {
    width: 270px;
    height: 110px;
    position: absolute;
    bottom: -10px;
    left: -10px;
    background-color: #ccc;
    border-radius: 50%;
    box-shadow:
        0 2px 0 #b3b3b3,
        0 4px 0 #b3b3b3,
        0 5px 40px rgba(0,0,0,0.5);
}
.cake > * {
    position: absolute;
}
.layer {
    position: absolute;
    display: block;
    width: 250px;
    height: 100px;
    border-radius: 50%;
    background-color: #553c13;
    box-shadow:
        0 2px 0px #6a4a1a,
        0 4px 0px #3a250a,
        0 6px 0px #3a250a,
        0 8px 0px #3a250a,
        0 10px 0px #3a250a,
        0 12px 0px #3a250a,
        0 14px 0px #3a250a,
        0 16px 0px #3a250a,
        0 18px 0px #3a250a,
        0 20px 0px #3a250a,
        0 22px 0px #3a250a,
        0 24px 0px #3a250a,
        0 26px 0px #3a250a,
        0 28px 0px #3a250a,
        0 30px 0px #3a250a;
}
.layer-top { top: 0px; }
.layer-middle { top: 33px; }
.layer-bottom { top: 66px; }
.icing {
    top: 2px;
    left: 5px;
    background-color: #f0e4d0;
    width: 240px;
    height: 90px;
    border-radius: 50%;
}
.drip {
    display: block;
    width: 50px;
    height: 60px;
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px;
    background-color: #f0e4d0;
}
.drip1 {
    top: 53px;
    left: 5px;
    transform: skewY(15deg);
    height: 48px;
    width: 40px;
}
.drip2 {
    top: 69px;
    left: 181px;
    transform: skewY(-15deg);
}
.drip3 {
    top: 54px;
    left: 90px;
    width: 80px;
    border-bottom-left-radius: 40px;
    border-bottom-right-radius: 40px;
}
.candles {
    position: absolute;
    top: 8px;
    left: 0;
    width: 100%;
    height: 50px;
    pointer-events: none;
}
.candle {
    background-color: #7B020B;
    width: 10px;
    height: 32px;
    border-radius: 5px / 3px;
    position: absolute;
    z-index: 10;
    transition: opacity 0.3s;
}
.flame {
    position: absolute;
    background: radial-gradient(ellipse at center, #ffe066 60%, #ff9900 100%);
    width: 14px;
    height: 22px;
    border-radius: 50% 50% 60% 60% / 70% 70% 40% 40%;
    top: -18px;
    left: 50%;
    margin-left: -7px;
    z-index: 11;
    box-shadow:
        0 0 12px 4px #ffe06699,
        0 0 24px 8px #ff990055;
    transition: opacity 0.3s, filter 0.3s;
    filter: drop-shadow(0 0 8px #ffe066) drop-shadow(0 0 16px #ff9900);
    cursor: pointer;
    animation: none;
}
.flame.off {
    opacity: 0;
    filter: none;
}
button {
    position: absolute;
    top: 220px;
    left: 50%;
    transform: translateX(-50%);
    padding: 10px 18px;
    background: #7B020B;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 2px 8px #0002;
    transition: background 0.2s;
}
button:hover {
    background: #a00;
}
@keyframes flicker {
    0% { transform: skewX(5deg) scaleY(1); opacity: 1; }
    25% { transform: skewX(-5deg) scaleY(1.1); opacity: 0.9; }
    50% { transform: skewX(10deg) scaleY(1); opacity: 1; }
    75% { transform: skewX(-10deg) scaleY(1.05); opacity: 0.85; }
    100% { transform: skewX(5deg) scaleY(1); opacity: 1; }
}

/* ---------- COUNTDOWN OVERLAY (Ø£Ø¨ÙŠØ¶ ÙˆÙˆØ±Ø¯ÙŠ) ---------- */
#countdownOverlay {
    position: fixed;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(90deg,#fff 0%, #ffeef6 100%);
    color: #b30059;
    padding: 12px 18px;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.35);
    display: none;
    z-index: 2000;
    text-align: center;
    font-family: 'Cairo', 'Montserrat', Arial, sans-serif;
}
#countdownOverlay .msg {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 6px;
}
#countdownOverlay .num {
    font-size: 1.6rem;
    font-weight: 900;
}

/* make flame clickable pointer when enabled */
.flame { pointer-events: auto; }
        </style>
    </head>
    <body>
        <div class="cake">
            <div class="plate"></div>
            <div class="layer layer-bottom"></div>
            <div class="layer layer-middle"></div>
            <div class="layer layer-top"></div>
            <div class="icing"></div>
            <div class="drip drip1"></div>
            <div class="drip drip2"></div>
            <div class="drip drip3"></div>
            <div class="candles" id="candles"></div>
        </div>
        <button id="offBtn">Ø¥Ø·ÙØ§Ø¡ Ø§Ù„Ø´Ù…ÙˆØ¹</button>

        <!-- Ø¹Ø¯Ù‘Ø§Ø¯ Ø¹Ù„ÙˆÙŠ ÙˆØ±Ø³Ø§Ù„Ø© -->
        <div id="countdownOverlay" aria-live="polite" role="status">
            <div class="msg"> : Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯!ğŸ’–ğŸ˜</div>
            <div class="num" id="countNum">5</div>
        </div>

        <script>
            // ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø´Ù…ÙˆØ¹ Ø¹Ù„Ù‰ ØµÙÙŠÙ† Ù…Ø¹ ØªØ¨Ø§Ø¹Ø¯ Ø¬ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙŠÙƒØ©
            const candlesContainer = document.getElementById('candles');
            const row1 = 9, row2 = 9;
            const cakeWidth = 250;
            const candleSpace1 = cakeWidth / (row1 + 1);
            const candleSpace2 = cakeWidth / (row2 + 1);

            // Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ (Ø®Ù„ÙÙŠ) - Ø£Ø¹Ù„Ù‰ Ù‚Ù„ÙŠÙ„Ø§Ù‹
            for(let i=0; i<row1; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                candle.style.left = `${candleSpace1 * (i+1) - 5}px`;
                candle.style.top = `2px`;
                const flame = document.createElement('div');
                flame.className = 'flame';
                candle.appendChild(flame);
                candlesContainer.appendChild(candle);
            }
            // Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ø£Ù…Ø§Ù…ÙŠ) - Ø£Ø³ÙÙ„ Ù‚Ù„ÙŠÙ„Ø§Ù‹
            for(let i=0; i<row2; i++) {
                const candle = document.createElement('div');
                candle.className = 'candle';
                candle.style.left = `${candleSpace2 * (i+1) - 5 + candleSpace2/2}px`;
                candle.style.top = `22px`;
                const flame = document.createElement('div');
                flame.className = 'flame';
                candle.appendChild(flame);
                candlesContainer.appendChild(candle);
            }

            // Ø²Ø± Ø¥Ø·ÙØ§Ø¡/Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ø´Ù…ÙˆØ¹ + Ø¹Ø¯Ø§Ø¯
            let flamesOff = false;
            const offBtn = document.getElementById('offBtn');
            const countdownOverlay = document.getElementById('countdownOverlay');
            const countNumEl = document.getElementById('countNum');
            let countdownTimer = null;
            let currentCount = 5;

            function startCountdown() {
                // reset
                clearCountdown();
                currentCount = 5;
                countNumEl.textContent = currentCount;
                countdownOverlay.style.display = 'block';

                countdownTimer = setInterval(() => {
                    currentCount--;
                    countNumEl.textContent = currentCount;
                    if (currentCount <= 0) {
                        clearCountdown();
                        // Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                        window.location.href = 'hellokity.html';
                    }
                }, 1000);
            }

            function clearCountdown() {
                if (countdownTimer) {
                    clearInterval(countdownTimer);
                    countdownTimer = null;
                }
                countdownOverlay.style.display = 'none';
            }

            offBtn.onclick = function() {
                // toggle flames
                flamesOff = !flamesOff;
                document.querySelectorAll('.flame').forEach(f => f.classList.toggle('off', flamesOff));
                // update button text
                this.textContent = flamesOff ? "Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ø´Ù…ÙˆØ¹" : "Ø¥Ø·ÙØ§Ø¡ Ø§Ù„Ø´Ù…ÙˆØ¹";

                // Ø¹Ù†Ø¯Ù…Ø§ ØªØµØ¨Ø­ Ø§Ù„Ø´Ù…ÙˆØ¹ Ù…Ø·ÙØ£Ø© Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø¯ØŒ ÙˆØ¥Ø°Ø§ Ø£Ø¹ÙŠØ¯ Ø¥Ø´Ø¹Ø§Ù„Ù‡Ø§ Ù†Ù„ØºÙŠ Ø§Ù„Ø¹Ø¯
                if (flamesOff) {
                    startCountdown();
                } else {
                    clearCountdown();
                }
            };

            // Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙØ±Ø¯ÙŠ Ù„Ù„Ø´Ù…ÙˆØ¹ - ÙŠÙ…ÙƒÙ† Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø´Ø¹Ù„Ø© Ù„Ø¥Ø·ÙØ§Ø¦Ù‡Ø§/Ø¥Ø´Ø¹Ø§Ù„Ù‡Ø§Ø› Ø¥Ø°Ø§ Ø£ØµØ¨Ø­Øª ÙƒÙ„Ù‡Ø§ Ù…Ø·ÙØ£Ø© ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø¹Ø¯
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('flame')) {
                    e.target.classList.toggle('off');
                    // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒÙ„ Ø§Ù„Ø´Ø¹ÙÙ„ Ù…Ø·ÙØ£Ø©
                    const all = Array.from(document.querySelectorAll('.flame'));
                    const allOff = all.length && all.every(x => x.classList.contains('off'));
                    flamesOff = !!allOff;
                    offBtn.textContent = flamesOff ? "Ø¥Ø´Ø¹Ø§Ù„ Ø§Ù„Ø´Ù…ÙˆØ¹" : "Ø¥Ø·ÙØ§Ø¡ Ø§Ù„Ø´Ù…ÙˆØ¹";
                    if (flamesOff) startCountdown(); else clearCountdown();
                }
            });
        </script>
    </body>
</html>